function getQueryStringByName(name){var result=location.search.match(new RegExp("[?&]"+name+"=([^&]+)","i"));return null==result||result.length<1?"":result[1]}function ajaxRequest(api,requestData,callback){var rdata="";if(requestData){requestData+="&platform=all";var datas=requestData.split("&");datas.sort(),rdata=requestData+"&sign="+$.md5(datas.join("&")+"&hikergou%@#")}$.ajax({url:serviceUrl+api,type:"post",data:rdata,async:!0,dataType:"json",success:function(result){callback&&callback(result)},cache:!0,timeout:5e3,error:function(result){alert(result.msg)}})}function initApp(){$(".touchable").on("touchstart MSPointerDown pointerdown",function(){$(this).addClass("touched")}),$(".touchable").on("touchend MSPointerUp pointerup",function(){$(this).removeClass("touched")}),$("a").on("touchstart MSPointerDown pointerdown",function(){$(this).addClass("touched")}),$("a").on("touchend MSPointerUp pointerup",function(){$(this).removeClass("touched")}),$(".dropdown .dropdown-btn").on("touch click",function(){$(".dropdown .dropdown-items").hasClass("open")?$(".dropdown .dropdown-items").removeClass("open"):$(".dropdown .dropdown-items").addClass("open")}),$(".dropdown .dropdown-items").on("touch click",function(){$(".dropdown .dropdown-items").removeClass("open")})}function openDialog(content,title,buttonArray,type,fn){zoom=1;var dialog=$("<div class='dialog'></div>"),mask=$("<div class='mask'></div>"),close=$('<img style="display:none;" class="btn-close touchable" src="images/close.png" />');if(mask.appendTo("body"),dialog.appendTo("body"),close.appendTo("body"),close.unbind("click").bind("click",function(){closeDialog()}),content)if(type==DialogType.Image){mask.addClass("deeper");var img=$('<div class="img-large"><img src="'+content+'" /></div>');img.appendTo(dialog),mask.unbind().bind("click",function(){closeDialog()}),img.unbind().bind("pinchopen",function(){zoom++,zoomImage(mask,img)}),img.bind("pinchclose",function(){zoom--,zoomImage(mask,img)}),img.bind("click",function(){3==zoom?closeDialog():(zoom=3,zoomImage(mask,img))})}else if(type==DialogType.Success){var dialogWrap=$("<div class='dialog-success'></div>");dialogWrap.appendTo(dialog),dialogWrap.append($('<div class="cart-success"></div>')),dialogWrap.append($("<span>"+content+"</span>"))}else if(type==DialogType.Prompt){var dialogWrap=$("<div class='dialog-body'></div>");dialogWrap.appendTo(dialog);var matchWord=/html/i;if(matchWord.test(arguments[0]))$(".dialog").addClass("html_text"),$(".dialog").load("views/"+title,function(){$(".btn-close").show(),$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){var flag=$(this).attr("promo").replace("button","");if(fn){for(var inputs=$(".dialog .dialog-body p input"),values=[],i=0;i<inputs.length;i++){var v=$(inputs[i]).val();values.push(v)}fn("1"==flag,values)}$(".btn-close").remove(),$(".mask,.dialog").remove()})});else{if(title&&""!=title){var dialogName=$("<h5></h5>");dialogName.appendTo(dialogWrap),dialogName.text(title)}var dialogText=$("<p></p>");if(dialogText.appendTo(dialogWrap),dialogText.html(content),buttonArray&&buttonArray.length>0){dialogWrap.addClass("dialog-confirm");var dialogFooter=$("<div class='dialog_footer justified'></div>");dialogFooter.appendTo(dialogWrap);for(var i=0;i<buttonArray.length;i++){var dialogButton=$("<div class='btn' promo='button"+i+"'></div>");dialogButton.append(buttonArray[i]),dialogButton.appendTo(dialogFooter)}}}$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){var flag=$(this).attr("promo").replace("button","");if(fn){for(var inputs=$(".dialog .dialog-body p input"),values=[],i=0;i<inputs.length;i++){var v=$(inputs[i]).val();values.push(v)}fn("1"==flag,values)}$(".btn-close").remove(),$(".mask,.dialog").remove()})}else if(type==DialogType.Pay){var dialogWrap=$("<div class='dialog-body'></div>"),payWay=easybuy.PaymentMethods.AlipayWeb;if(dialogWrap.appendTo(dialog),title&&""!=title){var dialogName=$("<h5></h5>");dialogName.appendTo(dialogWrap),dialogName.text(title)}if(dialogWrap.append($("#pay-area").html()),buttonArray&&buttonArray.length>0){dialogWrap.addClass("dialog-confirm");var dialogFooter=$("<div class='dialog_footer justified'></div>");dialogFooter.appendTo(dialogWrap);for(var i=0;i<buttonArray.length;i++){var dialogButton=$("<div class='btn' promo='button"+i+"'></div>");dialogButton.append(buttonArray[i]),dialogButton.appendTo(dialogFooter)}}$(".dialog-body .list-group .list-group-item .check-area .radio").bind("click",function(){$(".dialog-body .list-group .list-group-item .check-area .radio").removeClass("checked"),$(this).addClass("checked"),payWay=parseInt($(this).attr("value"))}),$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){$(".mask,.dialog").remove();var flag=$(this).attr("promo").replace("button","");fn&&fn("1"==flag,payWay)})}else if(type==DialogType.Load){var dialogWrap=$("<div class='dialog-body'></div>");dialogWrap.appendTo(dialog);var matchWord=/html/i;if(1==arguments.length&&matchWord.test(arguments[0]))$(".dialog").addClass("html_text"),$(".dialog").load("views/"+title);else{if(title&&""!=title){var dialogName=$("<h5></h5>");dialogName.appendTo(dialogWrap),dialogName.text(title)}var dialogText=$("<p style='height:3em'></p>");if(dialogText.appendTo(dialogWrap),dialogText.html('<i class="fa fa-spinner fa-spin loading-spinner"></i>'),buttonArray&&buttonArray.length>0){dialogWrap.addClass("dialog-confirm");var dialogFooter=$("<div class='dialog_footer justified'></div>");dialogFooter.appendTo(dialogWrap);for(var i=0;i<buttonArray.length;i++){var dialogButton=$("<div class='btn' promo='button"+i+"'></div>");dialogButton.append(buttonArray[i]),dialogButton.appendTo(dialogFooter)}}}$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){$(".mask,.dialog").remove();var flag=$(this).attr("promo").replace("button","");fn&&fn("1"==flag)})}else{var dialogWrap=$("<div class='dialog-body'></div>");dialogWrap.appendTo(dialog);var matchWord=/html/i;if(1==arguments.length&&matchWord.test(arguments[0]))$(".dialog").addClass("html_text"),$(".dialog").load("views/"+title);else{if(title&&""!=title){var dialogName=$("<h5></h5>");dialogName.appendTo(dialogWrap),dialogName.text(title)}var dialogText=$("<p></p>");if(dialogText.appendTo(dialogWrap),dialogText.text(content),buttonArray&&buttonArray.length>0){dialogWrap.addClass("dialog-confirm");var dialogFooter=$("<div class='dialog_footer justified'></div>");dialogFooter.appendTo(dialogWrap);for(var i=0;i<buttonArray.length;i++){var dialogButton=$("<div class='btn' promo='button"+i+"'></div>");dialogButton.append(buttonArray[i]),dialogButton.appendTo(dialogFooter)}}}$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){$(".mask,.dialog").remove();var flag=$(this).attr("promo").replace("button","");fn&&fn("1"==flag)})}}function zoomImage(mask,img){1>zoom&&(zoom=1),zoom>5&&(zoom=5),zoom>1?img.addClass("larger"):img.removeClass("larger"),mask.css("width",100*zoom+"%"),img.css("width",100*zoom+"%")}function alertWarning(content){openDialog(content),dialogTimeOutId=setTimeout("closeDialog()",2e3)}function alertExt(content,callback){openDialog(content);var d=setTimeout(function(){callback&&(callback(),clearTimeout(d))},1500)}function alertLoad(){openDialog(!0,null,null,DialogType.Load)}function alertSuccess(content){openDialog(content,null,null,DialogType.Success),dialogTimeOutId=setTimeout("closeDialog()",1500)}function openPrompt(content,title,btnArr,fn){openDialog(content,title,btnArr,DialogType.Prompt,fn)}function closeDialog(){$(".mask,.dialog,.btn-close").remove(),dialogTimeOutId&&clearTimeout(dialogTimeOutId),dialogTimeOutId=null}function showLargeImage(imgUrl){openDialog(imgUrl,null,null,DialogType.Image)}function showImageLarger(_this){openDialog(_this.src,null,null,DialogType.Image)}var serviceUrl="",statusCode={Success:0,error:-1},dialogTimeOutId=null,zoom=1,DialogType={Default:0,Image:1,Success:2,Prompt:3,Pay:4,Load:5};window.showLoading=function(){alertLoad()},window.hideLoading=function(){closeDialog()};