<!DOCTYPE html>
<html>
<head>
    <meta charset="utf8" />
    <title></title>
    <meta name="keywords" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimal-ui" />
    <meta name="apple-mobile-web-app-status-bar-style" content="yes" />
	

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
	
	<link href="css/layout.css" rel="stylesheet" type="text/css" />
	
	<script src="js/lib/zepto.min.js" type="text/javascript"></script>
	<script src="js/lib/touch.js" type="text/javascript"></script> 
    
    <script src="js/main.js" type="text/javascript"></script>
</head>
<body>
    <div class="app">
		<div class="scrollable">
			 <div class="nav">
			 		<div class="btn-left"></div>
					购轻松承诺
			 </div>
			 <div class="scrollable-content">
				<div class="viewport">
					<div class="item item1">
						
					</div>
					<div class="item item2">
						
					</div>
					<div class="item item3">
					</div>
					<div class="item item4">
					</div>		
				</div>
			 </div>
			 
			 <div class="next">
			   <img src="images/arrow_right.png" />
			 </div>
			 
			 <div class="pre">
			   <img src="images/arrow_left.png" />
			 </div>
		</div>
	</div>
</body>
<script>
	var winWidth=0;
	var winHeight=0;
	var index=1;

	$(document).ready(function(){
		var blockWidth=0;
		var platform=getQueryStringByName('platform');
		if(platform){
			$(".nav").css("display","none");
		}
		$(".btn-left").bind("click",function(){
			window.location.href="../";
		});
		var init=function(){
			winWidth=$(window).width();
			winHeight=$(window).height();
			$(".scrollable-content").css("min-height",winHeight+"px");

			$(".viewport").css("min-height",winHeight+"px");
			$(".item").css("min-height",winHeight+"px");
			$(".viewport").css("transform","translate3D(0,0,0)");
			$(".viewport").css("-webkit-transform","translate3D(0,0,0)");
			$(".viewport").css("-moz-transform","translate3D(0,0,0)");
			$(".viewport").css("-ms-transform","translate3D(0,0,0)");

			if(index==4){
				$(".next").hide();
			}
			if(index==1){
				$(".pre").hide();
			}


			//$('body').bind("touchmove", function(e) {     e.preventDefault();});
			//$('.scrollable-content').bind("touchmove", function(e) {     e.stopPropagation()});

			blockWidth=winWidth>600?600:winWidth;

		};


		
		
		document.body.addEventListener('touchmove',function(e){
			e.preventDefault();
		});

		init();

		$(window).resize(function() {
		  init();
		});
		
		
		
		var next=function(){
			if(index<4){
				$(".viewport").css("transform","translate3D(-"+index*blockWidth+"px,0,0)");
				$(".viewport").css("-webkit-transform","translate3D(-"+index*blockWidth+"px,0,0)");
				$(".viewport").css("-moz-transform","translate3D(-"+index*blockWidth+"px,0,0)");
				$(".viewport").css("-ms-transform","translate3D(-"+index*blockWidth+"px,0,0)");
				$(".pre").show();
				index++;
				if(index==4){
					$(this).hide();
				}
			}else{
				$(".next").hide();
			}		
		};
		var pre=function(){
			if(index>1){
				index--;
				$(".viewport").css("transform","translate3D(-"+(index-1)*blockWidth+"px,0,0)");	
				$(".viewport").css("-webkit-transform","translate3D(-"+(index-1)*blockWidth+"px,0,0)");
				$(".viewport").css("-moz-transform","translate3D(-"+(index-1)*blockWidth+"px,0,0)");
				$(".viewport").css("-ms-transform","translate3D(-"+(index-1)*blockWidth+"px,0,0)");				
				$(".next").show();
				if(index==1){
					$(this).hide();
				}
			}else{
				$(".pre").hide();
			}
		};
		
		$(".next").bind("click",function(){
			next();
		});
		
		$(".viewport").swipeLeft(function(){
			next();
		});
		$(".viewport").swipeRight(function(){
			pre();
		});
		
		$(".pre").bind("click",function(){
			pre();
		});
	});


</script>
</html>
